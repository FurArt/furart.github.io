try{define("controller",["lodash","documentReady"],function(){return{Controller:function(t,e){function n(t,e){return Math.floor(Math.random()*(e-t))+t}function a(n){var a=new XMLHttpRequest;a.open("GET","https://pixabay.com/api/?key=5553692-b6d8cb2b30635222df6f2566b&q="+n+"&min_width=700&lang=en+ru",!0),a.send(),a.onreadystatechange=function(){if(4==this.readyState){if(200!=this.status)return void alert("ошибка: "+(this.status?this.statusText:"запрос не удался"));var n=JSON.parse(this.responseText);_.forEach(n.hits,function(e,n){t.data.addItem([e.webformatURL,e.tags])}),s.load=1;var a=setInterval(e.renderImg(t),200);4===this.readyState&&setTimeout(function(){clearInterval(a)},2e3)}}}function r(n){var r=e.element.inputIdeas.value;return t.data.deleteBase(),a(r),n}var s=this;return e.element.inputBtn.addEventListener("click",r),e.element.inputIdeas.addEventListener("keypress",function(t){13===t.keyCode&&r()}),$(function(){var e=n(0,7);a(t.data.requestImg[e])}),s.sendRequest=r(),this}}})}catch(e){console.log(e)}finally{}